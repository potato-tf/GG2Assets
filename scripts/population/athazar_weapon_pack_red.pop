
// THE ATHAZAR WEAPON PACK (red variant)
// (or for a more fancy and alliterative name, Athazar's Arsenalâ„¢)

// A pack of weapons and rebalances specifically made for my next set of NORMAL missions because I feel like it.
// Originally made on a reverse mission that is now scrapped and considered a demo for the various things showcased in that mission.

// Disclaimer: None of the weapon models were made by me. They were recompiled by lite after being sent to me in an old community server weapon pack.
// However, I did modify some of the VMT files to fix bugs that spit out consoles in the console. Someone really fucking forgot the CLOSING BRACKET in some of these vmts.


// Actual new normal missions where these will show up featuring brand new ones not originally in TME:

// HH3
// * Butcher - Malpractice [INT]
// * Whitecliff Event - Light Up The Night [EXP]


// LIST OF WEAPONS

// SCOUT:
// Primary: The Payoff - Sets your credit collection radius to half, but killing bots grants you a significantly boosted credit collection range + bonus healing from credits. -1 bullet per shot, 20% more accurate.
// Secondary: Meta-Cola - Cola that gives you soda popper hype and milk on hit. +20% drink effect duration. The milk on hit lasts only 1 second and requires a more agressive playstyle to keep it applied.

// SOLDIER:
// Primary: Spitfire* - Launches mortar projectiles. Bleed on hit, increased blast radius, slightly lowered damage, and no damage fall-off or rampup. Slight damage bonus to tanks to compensate.
// Secondary: Handheld Howitzer - Explosive shotgun with low ammo and an infinite clip along with no falloff. Killing grants 5 seconds of minicrits. Has very slow deploy time and fire rate but can also shoot down projectiles.

// PYRO:
// Primary: The Solar Carbonizer - Alternative Phlog type of weapon that grants Conch and Backup instead of crits, granting more survivability. 20% more MMMPH gain rate, but has 10% less damage (except it also has +15% more tank damage to compensate) and almost zero afterburn (with afterburn upgrades disabled.)
// Secondary: The Calefactor - Shotgun that has less damage and clip size, crits burning players, but has a secondary fire that shoots an arcing fireball projectile.

// DEMOMAN:
// Primary: Sawblade Launcher - The same one from Waters of Wrath & Cascading Steel Swarm/Bog Business (where it's playable). Fires bouncing sawblades, just like in Ultrakill!
// Primary: Primed Directive - Fires bouncy grenades. Grenades have lower basge damage but gain a huge damage bonus when bounced off a surface before hitting a target. -20% blast radius
// Secondary: Polarity Point* - Fires 3 stickybombs in a burst of random spread, with lower fire rate/penalty/clip size and auto detonation. However, alt fire shoots a special magnet projectile that pulls all of your stickies and sawblades towards the magnet. This magnet can stick into enemies too.

// HEAVY:
// Primary: Nail Minigun - Fires nail projectiles with high damage. No move speed penalty while revved, can holster while revved, can move while ducking while revved. Can't use projectile penetration due to the way the projectiles work
// Secondary: Canned Conserva - Lunchbox item. Upon use, 34% of your minigun ammo gets regenerated every 5 seconds for a total of 5 seconds, acting like a free but delayed ammo canteen. When thrown, acts like a medium ammo pack

// ENGINEER:
// Primary: Screwdriver Railgun* - Fires a projectile that drills into enemies for extremely fast bleed damage.
// Secondary: Gamma Gazer - My take on the creators.tf weapon from Digial Directive. Has the rescue ranger pickup effect and fires irradiated lasers that apply a brief healing debuff. Significantly less ammo, a small clip size decrease, lower fire rate. Oh and also it isn't the Wrangler /s
// PDA: Mini PDA - Locks all buildings to level 1 but grants you a mini dispenser and ALL primaries gain a +75% damage bonus. Comes with many bonuses that allow for a very aggressive playstyle.
// Gunslinger Rework: Grants a free 2 disposable sentries, doubled dispenser healing/ammo rate, and +50% sentry damage. Has two new special upgrades: Flame Module and Rocket Module, which changes what your sentries shoot.

// MEDIC:
// Primary: Pill Popper* - Okay hear me out what if we gave Medic a grenade launcher that shoots pills. ACTUAL pills.
// Secondary: The Cauterizer - Healing passively grants your patient a 25% damage bonus vs burning players (doesn't stack on the huo-long, or so I hope) and you an afterburn immunity. Ubercharge grants minicrits, ignite on hit, and high burn damage. Tripled ubercharge rate that can be stacked with the upgrades.
// Melee: The Lethal Injector - My take on the other creators.tf weapon, Hypodermic Injector but renamed. Hitting an enemy afflicts them with a delayed but very strong bleed and applies a strong healing debuff, while also granting you a speed boost and buffed revive rate + medigun range for 1.5 seconds every successful tick of bleed (roughly 6-7 seconds total.)

// SNIPER:
// Primary: 50th Caliber* - Inherent explosive bullets, but explosive headshot upgrade is disabled. +15% damage bonus, pierces resists, +50% damage vs tanks/buildings (it's an anti-materiel rifle), slower move speed, zero movement while scoped, slower charge rate, slower switching/holstering speed.
// Primary: The Astral Assassin - Futuristic bow that fires a volley of arrows which briefly home in on players after a very short delay along with zero movement speed penalty while drawing your arrows.
// Secondary: The Bushman's Brick - Throwable brick that stuns any non-giant enemy for 3 seconds while also marking them for death.

// SPY:	
// Primary: Sharpshooter* - Fires projectile bullets that pierce and ricochet off surfaces. Lowered firing speed/clip size.
// Primary: Tranquilizer Gun - Marks for death + slows down bots, but lower damage/firing speed/clip size.
// Sapper: Timely Demise - Timebomb sapper that explodes 3 seconds after being placed on a robot or building. No longer stuns slows down giants such as super scouts, but upgrading it increases damage/blast radius. Double damage vs giants, too.

// Weapons marked with * have a custom upgrade.

// Special thanks to Lite for helping out with the logic for the following weapons:
// - Spitfire's unique thing with rapid descent
// - The entirety of Polarity Point's logic
// - Pill Popper logic + pill model	
// - Timely Demise kill credit fix + Upgrade compatibility
// - Sharpshooter projectile velocity fix
// - Faithful Mini Dispenser model

// Other Credits:
// OrangeGlazer - Suggesting that we basically turn spy into demoman with the amount of explosive shit he's getting/has planned
// SiF - Only person in potato.tf that actually gives custom weapon feedback, and good/proper/detailed feedback at that
// Ian Hunter - Making a model/texture swap for the Meta-Cola

// MODEL CREDITS //
// Sorry if you're somehow the owner of one of the models listed here and I didn't credit you.
// These models were found through a weapon pack sent to me that is used on a custom TF2 weapons on TF2 classic I think.

// Payoff: https://steamcommunity.com/sharedfiles/filedetails/?id=1559280021 (Doesn't list who made the model)
// Spitfire: Ertz / https://steamcommunity.com/sharedfiles/filedetails/?id=864871012 
// Solar Carbonizer: Corvalho according to this video where it is known as the Solar Flare https://www.youtube.com/watch?v=43CtoTUge_Y Interestingly this weapon has no workshop page despite the creator being a prominent item creator with like, dozens of items in the game
// Calefactor: Svdl / https://steamcommunity.com/sharedfiles/filedetails/?id=148521367
// Primed Directive: Svdl / https://steamcommunity.com/sharedfiles/filedetails/?id=1439260629
// Gamma Gazer: FiveEyes & Gadget / https://steamcommunity.com/sharedfiles/filedetails/?id=229535075
// Mini PDA (Known as the Industry Standard on the Workshop): Swaggernaut64 / https://steamcommunity.com/sharedfiles/filedetails/?id=1346795120 / https://gamebanana.com/mods/204948 / 
// Pill Popper's Pill: lite
// 50th Caliber: McRex, according to this video where it is known as the Overkiller https://www.youtube.com/watch?v=trS5ZGycgzA
// Tranquilizer Gun: UNKNOWN / Might be Valve actually?
// Timely Demise: Svdl / https://steamcommunity.com/sharedfiles/filedetails/?id=18568
	

athazar's_bar_and_bazaar	// subtle sneed's seed and feed reference
{
	// NOTE: You must place these precaches in your actual mission popfile if you want to use them in a mission properly.
	// Just doing "#base athazar_weapon_pack" will not actually make it download the weapon models/textures on join, so you must include this precache block.

	PrecacheModel	"models/ctf2w/weapons/c_models/c_payoff/c_payoff.mdl"
	PrecacheModel	"models/weapons/c_models/c_energy_drink/c_energy_drink_green.mdl"

	PrecacheModel	"models/ctf2w/weapons/c_models/c_spitfire_rocketlauncher/c_spitfire_rocketlauncher.mdl"
	PrecacheModel	"models/ctf2w/weapons/c_models/c_spitfire_rocketlauncher/w_rocket_spitfire.mdl"
	
	PrecacheModel	"models/weapons/c_models/c_solar_carbonizer/c_solar_carbonizer.mdl"
	PrecacheModel	"models/weapons/c_models/c_calefactor/c_calefactor.mdl"


	PrecacheModel	"models/ctf2w/weapons/c_models/c_techlauncher/c_techlauncher.mdl"
	PrecacheModel	"models/ctf2w/weapons/c_models/c_techlauncher/shellprojectile.mdl"

	PrecacheModel	"models/weapons/c_models/c_canned_ration/c_canned_ration.mdl"
	PrecacheModel	"models/weapons/c_models/c_canned_ration/c_ration_plate.mdl"

	PrecacheModel	"models/weapons/c_models/c_gamma_gazer/c_gamma_gazer_1.mdl"
	PrecacheModel	"models/ctf2w/weapons/w_models/w_mini_pda.mdl"

	PrecacheModel	"models/weapons/w_models/w_pill.mdl"
	PrecacheModel	"models/weapons/c_models/c_hypodermic_injector/c_hypodermic_injector.mdl"
	
	//PrecacheModel	"models/weapons/c_models/c_astral_assassin/c_astral_assassin.mdl"
	//PrecacheModel	"models/weapons/c_models/c_astral_assassin_projectile/c_astral_assassin_projectile.mdl"
	// who ACTUALLY uploads a fucking weapon model this fucked up like this oh my god

	PrecacheModel	"models/ctf2w/weapons/c_models/c_atgun/c_atgun.mdl"
	PrecacheModel	"models/weapons/c_models/c_laserbow/c_laserbow_nocull.mdl"
	PrecacheModel	"models/weapons/c_models/c_brick/c_brick.mdl"

	PrecacheModel	"models/weapons/c_models/c_tranquilizer/c_revolver.mdl"
	PrecacheModel	"models/weapons/c_models/c_timely_demise/c_timely_demise.mdl"
	PrecacheModel	"models/weapons/v_models/v_timebomb/v_timebomb.mdl"
	PrecacheModel	"models/weapons/w_models/w_rocketbullet.mdl"

	PrecacheModel	"models/buildables/mini_dispenser_faithful.mdl"
	PrecacheModel	"models/buildables/mini_dispenser_faithful_light.mdl"


	//////////////////////////////
	//	CUSTOM WEAPON SECTION	//
	//////////////////////////////

	CustomWeapon
	{
		Name	"The Payoff"
		OriginalItemName	"Upgradeable TF_WEAPON_SCATTERGUN"
		"custom item model"	"models/ctf2w/weapons/c_models/c_payoff/c_payoff.mdl"
		"special item description"		"When equipped, credit collection radius is set to x0.5."
		"special item description 2"	"Killing enemies will temporarily set your collection radius to x1.25 and grants bonus healing from credits."
		"special item description 3"	"Bonus collection radius and healing will reset after 5 seconds. Killing again resets the timer."
		"mult credit collect range"		0.5
		"add attributes on kill"		"mult credit collect range|2.50|5|health from credits|25|5"
		
		"bullets per shot bonus"	0.8
		"weapon spread bonus"		0.8
	}
	// Dev Notes: The Payoff is a revised version of "Pay to Play" from Powerplant Rev.
	// The older version functioned in a really weird and admittedly unconventional/fucking goofy way.
	// You spend money to attack and you have a special vscript thing where every credit you hold gives you a damage bonus, mimicking a certain item from The Binding of Isaac. (Money is Power)
	// I decided to scrap it because a gun that grants you credits in normal mvm has some fucked up potential and could lead to exploits.
	// This new version is meant to encourage damage scout instead of idle scout, as it forces you to kill to play properly.

	CustomWeapon
	{
		Name	"The Meta-Cola"
		OriginalItemName	"Crit-a-Cola"
		"custom item model"				"models/weapons/c_models/c_energy_drink/c_energy_drink_green.mdl"
		"special item description"		"Upon drinking, grants Soda Popper's hype effect to you + Attacking an enemy milks them for 1.5 seconds"
		"special item description 2"	"''What do you mean they put the meta in a cola?''"
		
		"mod_mark_attacker_for_death"	0	// so you can actually use the benefit of the milk on hit. there's no opportunity to use the milk on hit when you're fucking dead from eating a mini-crit rocket or pipe

		"effect add attributes"	"add cond on hit|27|add cond on hit duration|1.5|add cond when active|36"	// Oh, you want to support your teammates? Work for it by attacking to keep milk applied
		"effect cond override"	65
		"mult effect duration"	1.25

	}


	CustomWeapon
	{
		Name	"Spitfire"
		OriginalItemName	"Upgradeable TF_WEAPON_ROCKETLAUNCHER"
		"custom item model"	"models/ctf2w/weapons/c_models/c_spitfire_rocketlauncher/c_spitfire_rocketlauncher.mdl"
		"custom projectile model"	"models/ctf2w/weapons/c_models/c_spitfire_rocketlauncher/w_rocket_spitfire.mdl"
		"special item description"	"Launches mortars; Aim higher to shoot farther!"
		"special item description 2"	"No damage ramp-up or fall-off. Inflicts bleed on hit. Projectile has a slightly larger hitbox."
		"projectile gravity"	800
		"projectile speed increased"	1.3
		"damage penalty"	0.85
		//"blast radius increased"	1.3
		"bleeding duration"		5
		"no damage falloff"		1
		"no self effect"		1
		"mult dmg vs tanks"		1.20
		"mult projectile scale"	1.15
		
	}
	// Dev Notes: Returning weapon from Powerplant Rev but tweaked a bit.
	// Ye olde average mortar type weapon, featuring a cool thing where angling them upwards makes them actually turn downwards properly.
	// Normally, if you have "projectile gravity" then aim upward, the rocket model stays pointing upwards and that fucking sucks, actually.
	// Paired with a custom upgrade to increase bleed damage/tick rate, should be a pretty strong option. If you have the money, that is.
	// So far, one person really liked this during that one test.


	CustomWeapon
	{
		Name	"The Handheld Howitzer"	// aka Bolshevik Bomber: Soldier Edition (Featuring Special Guest: Me learning from the past mistakes I made with my previous explosive bullet weapons)
		OriginalItemName	"TF_WEAPON_SHOTGUN_SOLDIER"
		"custom item model"			"models/weapons/c_models/c_the_bolshevik_bomber/c_the_bolshevik_bomber_1.mdl"

		
		"special item description"		"Very slow to switch to and fire, but fires explosive shells with no damage falloff and has an infinite clip"
		"special item description 2"	"Killing with this weapon grants a mini-crit boost to all weapons for 7 seconds"
		"special item description 3"	"Can shoot down incoming projectiles in close range, similar to Heavy's deflect upgrade"

		"damage bonus"				20
		"bullets per shot bonus"	0.15
		"no damage falloff"			1
		"explosive bullets"			150
		"weapon always gib"			1
		"fire rate penalty"			2.2
		"switch from wep deploy time decreased"	0.5
		"single wep deploy time increased"		1.5
		"minicritboost on kill"		7
		"maxammo secondary reduced"	0.5
		"mod max primary clip override"	-1
		"attack projectiles"			1	// I think this is reasonable because you're giving up a banner
		// what in the actual fuck am I cooking
	}


	CustomWeapon	// Because I can't just make a weapon pack without giving pyro something. I guess.
	{
	    Name				"Inferno Rebound"
		OriginalItemName	"Upgradeable TF_WEAPON_FLAMETHROWER"
		//"custom item model"	"models/ctf2w/weapons/c_models/c_american_flamethrower/w_american_flamethrower.mdl"	// guh, model breaks probably because it's a w_model
		"special item description"		"Flamethrower range significantly increased. Lowered flame spread, weaker afterburn, higher ammo consumption."
		"special item description 2"	"Flames bounce off surfaces and deal 50% extra damage when rebounded."
		"special item description 3"	"Reflected projectiles have doubled velocity."
		"afterburn duration penalty"	0.5
		"weapon burn dmg reduced"		0.5
		"paintkit_proto_def_index"		205	// Fire Glazed
		"set_item_texture_wear"			0
		"flame_drag"					3
		"flame_ignore_player_velocity"	1
		"flame_spread_degree"			1
		"flame_reflect_on_collision"	2
		"flame_lifetime"				0.8
		"flame_speed"					2600
		"reflected_flame_dmg_reduction"	1.4
		"no damage falloff"				1
		"flame ammopersec increased"	1.50
		"mult reflect velocity"			2
		"damage penalty"				0.75
	}
	// Dev Notes: Average bouncy flame thrower and the billionth new bouncy weapon. Made because I wanted Pyro to have at least SOMETHING.
	// The original Powerplant Rev Pyro items either sucked or had annoying bugs, so I had to make something new- then came the idea for this thing.
	// It's actually super strong- or WAS too strong when first tested on Light Up The Night (Whitecliff Event Expert). Oops.
	// 9/4/24: apparently not, so I'm removing it


	// here you go pyro, you can actually have cool new shit
	CustomWeapon	// attempt at making an actually interesting custom pyro weapon
	{
		Name	"The Solar Carbonizer"
		OriginalItemName	"The Phlogistinator"
		//"custom item model"	"models/weapons/c_models/c_solar_carbonizer/c_solar_carbonizer.mdl"
		"damage penalty"	0.85
		"weapon burn time reduced"	0.0001
		"afterburn duration penalty"	0.0001
		"weapon burn dmg reduced"	0.5
		"rage receive scale"		1.2
		
		"special item description"		"Alternative Phlog; MMMPH is replaced with triple banner effect (Battalion's Backup + Buff Banner + Concheror)"
		"special item description 2"	"-15% damage penalty and significantly reduced afterburn; Afterburn upgrades are disabled on this weapon"
		"effect cond override"	1056026
		
		//"spread offset pattern"		"10 -15 100"	// oh custom flamethrower models, why do you have to be like this

	}
	CustomWeapon	// attempt at making an actually interesting custom pyro weapon
	{
		Name	"The Calefactor"
		// Bitches be like: Can't stand the absurdly overused flame shotgun concept
		// 1 month later:
		OriginalItemName	"TF_WEAPON_SHOTGUN_PYRO"
		"custom item model"	"models/weapons/c_models/c_calefactor/c_calefactor.mdl"

		"special item description"		"Lowered damage per shot, but crits burning targets"
		"special item description 2"	"ALT FIRE: Shoot an arcing fireball projectile with a cooldown"
		
		"clip size penalty"	0.64
		"damage penalty"	0.8
		"fire rate penalty"	1.2
		"crit vs burning players"	1
		"minicritboost on kill"		7
		"special damage type"		1	// used exclusively for mvm_whitecliff_event_rc2_exp_light_up_the_night.pop's normal mode final boss
		
		"alt fire attack" 3
		"alt fire attributes" "override projectile type|2|Set DamageType Ignite|1|projectile trail particle|spell_fireball_small_red|fire rate penalty|3|projectile gravity|600|custom projectile model|models/empty.mdl|damage bonus|5|projectile speed increased|2|self dmg push force increased|2|blast dmg to self increased|1.5|blast radius increased|1.5"

	}

	CustomWeapon  
	{
		Name				"Sawblade Launcher"	
		OriginalItemName "TF_WEAPON_GRENADELAUNCHER"
		"override projectile type" 18
		//"clip size bonus" 1.5            
		//"dmg pierces resists absorbs" 1
		"use original class weapon animations" 1
		//"projectile gravity" 1	// this needs to be removed for the polarity point synergy to work
		"mult projectile scale"			0.01			
		"custom weapon reload sound"		"=40|ui/item_light_gun_drop.wav"
		//"ammo regen"  1
		"fire rate penalty HIDDEN" 0.85
		"halloween reload time decreased" 1.15
		//"fire rate penalty HIDDEN" 2.67
		"damage penalty" 0.5
		"mult dmg vs giants" 1.4
		"mult dmg vs tanks" 1.4
		"grenade bounce damage" -0.85
		"hidden primary max ammo bonus" 1.5
		//"custom hit sound" 				"=50|ambient_mp3/sawblade_impact1.mp3"
		//"custom impact sound" 			"Metal.SawbladeStick"
		//"projectile speed decreased"	1
		"custom item model"				"models/workshop/weapons/c_models/c_crusaders_crossbow/c_crusaders_crossbow.mdl"
		//"no damage falloff"				1
		"custom kill icon"				"saw_kill"	
		"grenade bounce speed"			1
		"custom projectile size"		1550
		"centerfire projectile" 1
		//"grenade bounce damage" -0.15
		"reset arrow hits on bounce" 1
		"projectile lifetime"			5
		"projectile penetration"		1		
	}
	// Dev Notes: Just the Sawblade Launcher seen in Waters of Wrath (Oilrig ADV, bots only), Cascading Steel Swarm (Cyberia Expert, actually playable), and Bog Business (Bogland ADV, also playable)
	// Nothing much to really say since this hasn't gone unchanged since the first iteration/version in colonel's missions. Ultrakill reference goes brrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr

	CustomWeapon
	{
	    Name				"Primed Directive"
		OriginalItemName	"Upgradeable TF_WEAPON_GRENADELAUNCHER"
		"custom item model"			"models/ctf2w/weapons/c_models/c_techlauncher/c_techlauncher.mdl"
		"custom projectile model"	"models/ctf2w/weapons/c_models/c_techlauncher/shellprojectile.mdl"
		"special item description"	"Shoots bouncy grenades. Lower base damage, but bonus damage on bounces"
		"damage penalty"			0.8
		"grenade no spin"			1
		"blast radius decreased"	0.8
		"grenade bounce damage"		0.55
		"grenade bounce speed"		1.1
		"fuse bonus"				0.5
	}
	// Dev Notes: Let me get this straight. The Primed Directive's model goes way too fucking hard. That alone inspired me to put it in.
	// Aside from that- returning weapon from Powerplant Rev. Made because bouncy weapons are cool and this encourages pipe demo, an underrated pick.


	CustomWeapon
	{
		Name	"Polarity Point"
		OriginalItemName	"Upgradeable TF_WEAPON_PIPEBOMBLAUNCHER"
		"special item description"		"Shoots a burst of 3 stickies that stick to enemies and auto-detonate after 2.5 seconds"
		"special item description 2"	"Alt-Fire: Shoot a magnet that attracts your own stickybombs and sawblades, auto-disabling after 5 seconds."
		"special item description 3"	"Magnet uses no ammo but only 1 can be active at a time. Press your special attack (Shield, Rage) bind to manually disable a magnet early."

		"switch from wep deploy time decreased"	0.5
		"clip size penalty"		0.5
		"damage penalty"		0.45
		"fire rate penalty"		1.25
		"mult projectile count"	3
		"projectile detonate time"	2.5
		"set_item_texture_wear"		0
		"paintkit_proto_def_index"	241	// Electroshocked
		"projectile spread angle penalty"	6.9
		"sticky arm time penalty"	99
		"stickybomb stick to enemies"	1
	}

	// Dev Notes: New weapon that is probably going to be my new favorite.
	// This thing is inspired by the Attractor Nailgun from Ultrakill. The Sawblade Launcher was missing this and it made me wonder if it was even possible to have this kind of thing in TF2/MvM.
	// Luckily, John Vscript was there to help, so now we have this.

	CustomWeapon
	{
	    Name						"Nail Minigun"
		OriginalItemName			"Tomislav"
		"special item description"	"Fires high damage nail projectiles with a high damage bonus vs buildings"
		"special item description 2"	"Unable to penetrate enemies (Upgrade disabled)"
		"set_item_texture_wear"		0
        "paintkit_proto_def_index"	411	// Steel Brushed
		"damage bonus"				3
		"override projectile type"	5
		"dmg bonus vs buildings"	2	// i am NAILING your BUILDINGS
		"fire rate penalty"			1
		"minigun full movement" 	1
		"aiming movespeed increased"	1.8
		"mult duck speed"	2
		"mod minigun can holster while spinning" 1
		//"mult crit dmg"		0.66
		"custom kill icon"	"syringegun_medic"
		"mult dmg vs tanks"	1.50
		"reduced damage rampup"	1
		
		"special damage type"	2	// Specifically added so this isn't absolutely cucked against bosses with very high minigun damage resistance (currently Time-Constraint Soul from Light Up The Night)
		
		// "mult projectile count"	4	// WHY THE FUCK DOES THIS WORK ON THE NEEDLE SHOTGUN BUT NOT THE NAIL MINIGUN
	}
	// Dev Notes: This weapon is a combination of TWO returning weapons from Powerplant Rev!
	// Originally these two weapons were the Nail Minigun and Mobility Barrel.
	// Nailgun only replaced your bullets with nails with no other bonuses aside from higher damage.
	// The Mobility Barrel basically had every mobility attribute listed here.
	// Both of them were kind of eh on their own, so my new idea was to just put the two together. And I think it works. Need to test more to discern properly.

	CustomWeapon
	{
		Name				"The Canned Conserva"
		OriginalItemName	"The Buffalo Steak Sandvich"
		"custom item model"		"models/weapons/c_models/c_canned_ration/c_canned_ration.mdl"
		"effect add attributes"	"ammo regen|0.34"
		"energy buff dmg taken multiplier"		1	// removes goofy ass steak damage vuln while effect is up
		"effect cond override"	65	// should do absolutely nothing, just overrides the steak "buff"
		"special item description"		"Upon use, regenerates 34% ammo every 5 seconds over the course of 15 seconds"
		"special item description 2"	"Does not heal, but acts as a medium ammo pack when shared with an ally"
		
	}

	CustomWeapon
	{
	    Name				"Screwdriver Railgun"
		OriginalItemName	"The Rescue Ranger"
		"special item description"	"Fires a high speed, high damage projectile with zero gravity that drills into targets on impact, dealing damage over time"
		"set_item_texture_wear"	0
        "paintkit_proto_def_index"	414	// Bomb Carrier
		"damage bonus"		1.75
		"mult bleeding delay"	0.2
		"mult bleeding dmg"		0.5
		"mult dmg vs tanks"			2
		"fire rate penalty"	2
		"bleeding duration"	5
		"Projectile speed increased"	2
		"projectile gravity"			1
		"reload time increased hidden"	1.4
		"arrow heals buildings"	0
		"no damage falloff"	1
		"custom projectile size"	10
		
		"mark for death on building pickup"		0
		"engineer building teleporting pickup"	0
	}
	// Dev Notes: Returning weapon from Powerplant Rev.
	// Simply a weapon that gives a high power attack. Mimics the Screwdriver Railgun Engineers from Waters of Wrath (Oilrig ADV) but with some changes here and there.

	CustomWeapon
	{
		Name	"The Gamma Gazer"
		OriginalItemName	"The C.A.P.P.E.R"
		"custom item model"	"models/weapons/c_models/c_gamma_gazer/c_gamma_gazer_1.mdl"
		// most of these stats were inspired by the creators.tf implementation of the gamma gazer during digital directive
		"damage applies to sappers"				1
		"damage bonus"							2
		"fire rate penalty"						2.25
		"maxammo secondary reduced"				0.25
		"clip size penalty"						0.8
		"engineer building teleporting pickup"	50
		"mark for death on building pickup"		1
		"mult crit dmg"	0.5
		
		// my own stat additions mainly because it doesn't give the weapon the cool capper effects when modelswapped
		"set item tint RGB"			5504768
		"override projectile type"	13
		
		"special item description"	"Fires irradiated laser projectiles that ignore damage resistance and give a 20% healing penalty to targets hit for 3 seconds"
		"special item description 2"	"Grants Rescue Ranger long range building pickup, costs 50 metal"
		"dmg pierces resists absorbs"	1
		"add attributes on hit"		"healing received penalty|0.75|3"
		"spread offset pattern"		"10 -15 -5"	// Ok this is epic. Normally laser overrides make this fire from your face but this makes the fire position in first person properly aligned with the gun

	}

	CustomWeapon
	{
	    Name				"Artillery Sentry Wrench"
		OriginalItemName	"TF_WEAPON_WRENCH"
		"paintkit_proto_def_index"	217	//	// Bomber Soul
		"custom sentry model"	"models/buildables/sentry_artillery"
		"special item description"		"Replaces sentry with an Artillery Sentry"
		"special item description 2"	"Sentry bullets are high damage, but fire slower"
		"special item description 3"	"Sentry rockets are homing, deal 25% more damage, and stun on direct hit"
		"engy sentry fire rate increased"	3
		"engy sentry damage bonus"			2
		//"sentry bullet weapon"			"Artillery Sentry Bullets"
		"sentry rocket weapon"			"Artillery Sentry Rockets"
		
		"custom_paintkit_seed_hi"	2347673947150312396
		"custom_paintkit_seed_lo"	2347673947150312396
		"set_item_texture_wear"		0
	}
	// Dev Notes: Returning weapon, whole new concept to the potato custom weapons space and I'm damn proud of how this turned out. Not to mention lite's help to get this thing working.
	// I should mention that this is also a slightly revamped version- the explosive bullets used are a new addition.
	// Previously it was just higher damage bullets, slower firing speed and just that. Pretty boring sidegrade.
	// I was extremely limited due to a bug where literally any weapon type used for sentry bullets just inexplicably crashed the server.
	// Then that got fixed and here we are. Actual explosive bullets without falloff.
	// 8/10/24: what the fuck this lags the server nvm. back to uninteresting bullets we go ig
	// 9/1/24: This fucking sucks, actually. Removing this.

	CustomWeapon	// Used for Artillery Sentry
	{
	    Name				"Artillery Sentry Bullets"
		OriginalItemName	"Upgradeable TF_WEAPON_PISTOL"
		"no damage falloff"	1
		"explosive bullets"	100
		"damage bonus"		2
	}
	CustomWeapon	// Used for Artillery Sentry
	{
	    Name				"Artillery Sentry Rockets"
		OriginalItemName	"Upgradeable TF_WEAPON_ROCKETLAUNCHER"
		"custom projectile model"	"models/buildables/sentry_artillery3_rockets.mdl"
		"rocket specialist"	1
		"damage bonus"		1.25
		"mod projectile heat seek power"	360
		"mod projectile heat aim error"		90
	}

	CustomWeapon	// Used for Flame Module Upgrade on Gunslinger
	{
	    Name				"Flame Module"
		OriginalItemName	"The Dragon's Fury"
		"damage penalty"	0.75

	}
	CustomWeapon	// Used for Rocket Module Upgrade on Gunslinger
	{
	    Name				"Rocket Module"
		OriginalItemName	"Upgradeable TF_WEAPON_ROCKETLAUNCHER"
		"damage penalty"	0.5
		"fire rate penalty"	4
	}

	CustomWeapon
	{
	    Name				"Mini PDA"
		OriginalItemName	"Upgradeable TF_WEAPON_PDA_ENGINEER_BUILD"
		"custom item model"	"models/ctf2w/weapons/w_models/w_mini_pda.mdl"
		"custom dispenser model"		"models/buildables/mini_dispenser_faithful"
		"special item description"		"Replaces dispenser and teleporters with a Mini-Dispenser and Mini-Teleporters. Gives you a free disposable Mini-Sentry."
		"special item description 2"	"Grants a 75% damage bonus to your primary weapon"
		"special item description 3"	"All buildings are locked to level 1 but your dispenser and teleporters build 200% faster"
		"building max level"			1
		"max health additive bonus"		50
		"mult teleporter recharge rate"	0.25
		"engineer teleporter build rate multiplier"	3
		"engy disposable sentries"	1
		"has pipboy build interface"	1

		//"mod dispenser cost"			-0.5
		//>doesn't display changed metal cost in pda build menu mid-wave
		//>as it turns out, because of this, if you don't have 100 metal then you can't build the mini-disp with 50 metal unless you use build 0 in console
	}
	
	// Dev Notes: The Flame Module, Rocket Module, Mini PDA, and Gunslinger Reworks are all a combined attempt to make a more interesting playstyle for Engineer should he go Gunslinger.
	// An interesting thing to note is that it's designed to make you more offensive while still being defensive. This is due to the specific addition of "damage bonus bullet vs sentry target".
	// People usually slap on a simple "damage bonus" on all Engi primaries/secondaries which makes him uber offensive. Which might be too powerful at times. Especially given the usual large bonus.
	// By using specifically damage bonus bullet vs sentry target, this forces Engineers to remain defensive because they can't just shred ANYTHING- only whatever's targeted by their mini-sentries.
	// Having a whole +2 mini sentries from the start makes it easier to use the bonus as well. I find it interesting how even if your target is out of the Flame Module's range, you still get the bonus.

	CustomWeapon
	{
		Name	"Pill Popper"
		OriginalItemName	"Upgradeable TF_WEAPON_GRENADELAUNCHER"
		"special item description"		"Grenade Launcher that shoots pills. No, really- ACTUAL pills."
		"special item description 2"		"Pills heal allies on hit or if in their explosion radius."
		"special item description 3"		"Pills deal low damage vs enemies, inflicting bleed on hit."
		"use original class weapon animations"	1
		"use original class player animations"	1
		"custom projectile model"	"models/weapons/w_models/w_pill.mdl"
		"projectile trail particle"	"~healshot_trail_red"
		"explosion particle"	"spell_overheal_red"
		"paintkit_proto_def_index"	102 // Wrapped Reviver Mk.II
		"set_item_texture_wear"	0
		"grenade explode on impact" 1
		"maxammo primary reduced"	0.75
		"clip size bonus"	1.5
		"damage penalty"	0.25
		"dmg penalty vs buildings"	0
		"self dmg push force decreased"	0.6
		"fire input on hit"	"!self^RunScriptCode^AthazarWeaponPack.PillPopper.call(this)"
		"fire input on hit name restrict" "player"
		"bleeding duration"		3
		"mult bleeding dmg"		2
		"no self effect"		1
		"blast radius decreased"	0.7
		"fire rate penalty"			1.2
		"add attributes when active"	"cannot taunt|1"	// prevents demoman taunt as medic
	}
	// Dev Notes: New! An interesting concept that came to mind after a certain someone joked about "medic but he shoots pills."
	// So, as the custom description goes- Let's give him pills. No, seriously. ACTUAL PILLS.

	CustomWeapon
	{
	    //Name				"The Critical Transmission"
		//OriginalItemName	"The Quick-Fix"	// setting it to the quickfix MOSTLY fixes healing beams. it's not over
		//"custom view model"	"models/weapons/c_models/c_medic_arms.mdl"	// this also fixes invis hands in first person. it's so not over
		//"custom item model"	"models/ctf2w/weapons/c_models/c_transmission/c_transmission.mdl"
		
		Name	"Infrared Transmitter"
		OriginalItemName	"Upgradeable TF_WEAPON_MEDIGUN"
		"paintkit_proto_def_index"		280	// Starlight Serenity
		"set_item_texture_wear"			0
		"special item description"	"Ubercharge grants homing projectiles, faster projectile speed, and Buff Banner + Battalion's Backup effects"
		"effect cond override"		14976	// Buff Banner Cond (Cond #16) x Battalion's Backup Cond (Cond #26) x Soda Popper Hype Cond (Cond #36)	// nevermind I am definitely retarded and forgot how you're supposed to calculate this attribute
		"effect add attributes"		"mod projectile heat seek power|360|mod projectile heat aim error|90|projectile speed increased|1.5|projectile trail particle|eyeboss_projectile"
		"heal rate bonus"	1.20
		"ubercharge rate penalty"	1.33	// should stack with base ubercharge bonus upgrade and not count as already bought
	}
	// Dev Notes: I just think homing projectiles are neat.
	// However, not enough data because of the usual medic players in my mission tests. Might need a buff of some sort...
	// Ok after testing it, this shit inexplicably crashes your game when YOU revive a player and I'm going to chalk it up to being the models involved.
	// What the actual fuck. Disregard all prior comments.
	// 9/4/24 nevermind fuck this medigun entirely holy shit

	CustomWeapon	// originally from malpractice but now Differentâ„¢
	{
		Name	"The Cauterizer"
		OriginalItemName	"Upgradeable TF_WEAPON_MEDIGUN"
		"paintkit_proto_def_index"		205	// Fire Glazed
		"set_item_texture_wear"			0
		"special item description"		"Passively grants a 25% damage bonus vs burning targets to your patient and afterburn immunity to you"
		"special item description 2"	"Ubercharge grants minicrits, ignite on hit, and high burn damage"
		"special item description 3"	"Tripled Ubercharge Rate that stacks with buyable upgrade"
		"medigun passive attributes"	"damage bonus vs burning|1.25"	// should hopefully not stack with the huo long's inherent bonus
		"medigun passive attributes owner"	"afterburn immunity|1"
		"effect cond override"			16
		"effect add attributes"			"attach particle effect|1|weapon burn dmg increased|4|Set DamageType Ignite|1|projectile trail particle|spell_fireball_small_red"
		"heal rate bonus"				1.20
		"ubercharge rate penalty"		3	// should stack with base ubercharge bonus upgrade and not count as already bought
	}
	CustomWeapon
	{
		Name				"The Lethal Injector"	// lethal_injection.gif
		OriginalItemName	"The Ubersaw"
		"custom item model"	"models/weapons/c_models/c_hypodermic_injector/c_hypodermic_injector.mdl"
		"melee range multiplier"		1.5
		"fire rate penalty"				2
		"damage penalty"				0.05
		"add uber charge on hit"		0
		"special item description"		"Extremely low damage but inflicts a very powerful yet slow bleed that lowers enemy healing by 50%"	// I am definitely not beating the Grouch allegations at this point
		"special item description 2"	"On hit, grants +50% revive rate, +50% medigun range, and Backup + Conch effect for 1.5 seconds per tick of damage"
		"mult bleeding delay"			3
		"mult bleeding dmg"				7.5
		"bleeding duration"				5
		"add attributes on hit"			"healing received penalty|0.5|1.5"
		
		"self add cond on hit"			7450
		"self add cond on hit duration"	1.5	// effectively same duration as bleed- every tick of bleed counts as a hit and resets the timer
		"self add attributes on hit"	"mult medigun range|1.5|1.5|revive rate|1.5|1.5"	// oops it's all 1.5
	}

	CustomWeapon
	{
	    Name				"50th Caliber"
		OriginalItemName	"The AWPer Hand"
		"custom item model"	"models/ctf2w/weapons/c_models/c_atgun/c_atgun.mdl"
		"special item description"	"Anti-Materiel rifle; Inherent explosive bullets, explosive headshot upgrade disabled"
		"no damage falloff"	1	// I think this fixes the chicanery with the way explosive bullets seems to work // no it does not
		"explosive bullets"	150
		"dmg pierces resists absorbs"	1
		"CARD: damage bonus"	1.15
		"move speed penalty"	0.85
		"SRifle Charge rate decreased"	0.8
		"self dmg push force decreased"	0.5
		"blast dmg to self increased"	1.5
		"single wep holster time increased"	1.45
		"single wep deploy time increased"	1.45
		"mult dmg vs tanks"	1.85	// It IS an anti-materiel rifle after all	
		"dmg bonus vs buildings"	2
	}
	CustomWeapon
	{
		Name	"The Astral Assassin"
		OriginalItemName	"The Fortified Compound"
		"custom weapon fire sound"	"=50|Weapon_ShootingStar.SingleCharged"

		"aiming movespeed increased"	1.8
		"dmg penalty vs players"	0.75
		// to do and be finished when I get a proper fixed model

		// UPDATE: WE ARE SO BACK
		"custom item model"	"models/weapons/c_models/c_laserbow/c_laserbow_nocull.mdl"

		"special item description"		"Shoots a volley of 3 arrows- center arrow is full damage while the side ones deal less damage"
		"special item description 2"	"All arrows briefly home in on the nearest target after a short delay upon being fired"
		"special item description 3"	"[NOTICE] Projectile Penetration Upgrade is disabled due to bugs with it"

		"mod projectile heat seek power"	150
		"mod projectile heat aim error"		75
		"mod projectile heat aim start time"	0.25
		"mod projectile heat aim time"			0.5
		"arrow mastery" 						1
		
	}
	CustomWeapon
	{
		Name	"The Bushman's Brick"	// THE RETURN... OF THE BRICK...
		OriginalItemName					"Jarate"
		"custom item model"					"models/weapons/c_models/c_brick/c_brick.mdl"
		"custom projectile model"			"models/weapons/c_models/c_brick/c_brick.mdl"
		"override projectile type extra"	"brick"
		"Projectile speed increased"		1.5
		"projectile trail particle"			"~pipebombtrail_red"
		"damage bonus"						2
		//"custom weapon fire sound"			"Passtime.Throw"	// no throw sound irks me // the fact this doesn't work irks me even more so I have an even more creative idea in mind for that
		"fire input on attack"		"!activator^$PlaySoundToSelf^=90|Passtime.Throw"	// Okay so the cool thing about this is that the sound is actually randomized and every possible sound is good
		"stun on hit"			3
		"stun on hit no giants"	1
		"stun on hit type"		"bonk"
		"mark for death"		1	// I mean, may as well since you're trading the jarate splash for this meme

		"special item description"		"Throw a brick projectile that stuns any non-giant enemy for 3 seconds"
		"special item description 2"	"On hit, marks any target for death regardless of size"
		"special item description 3"	"[NOTICE] Upgrading the slow upgrade will affect giants"
		"spread offset pattern"		"10 -15 -25"

	}




	// Dev Notes: How the fuck am I supposed to know how this plays out when nobody ever picks sniper in my tests? Even if they do, woe be upon me, because they pick huntsman instead.

	CustomWeapon
	{
	    Name				"Tranquilizer Gun"
		OriginalItemName	"TF_WEAPON_REVOLVER"
		"custom item model"	"models\weapons\c_models\c_tranquilizer\c_revolver.mdl"
		"special item description"		"Fires syringes that mark and slow robots"
		"special item description 2"	"[NOTICE] Needles can't penetrate, penetration upgrade is disabled"
		"override projectile type"		5
		"damage penalty"				0.5
		"mark for death"				1
		"slow enemy on hit major"		3
		"fire rate penalty HIDDEN"		1.5
		"clip size penalty HIDDEN"		0.5
		"halloween reload time decreased"	1.5
		"custom kill icon"	"syringegun_medic"
	}
	// Dev Notes: I just think the cut tranquilizer gun idea is neat.
	// Also returns from Powerplant... Again...

	CustomWeapon
	{
	    Name				"Sharpshooter"
		OriginalItemName	"Upgradeable TF_WEAPON_REVOLVER"
		"special item description"		"Fires bouncing bullet projectiles that increase in speed with every rebound"
		"set_item_texture_wear"			0
        "paintkit_proto_def_index"		411	// Steel Brushed
		"override projectile type"		18
		"clip size penalty"				0.5	
		"mult projectile scale"			1
		"custom weapon reload sound"	"=50|ui/item_light_gun_drop.wav"
		"damage bonus"					1.25
		"halloween fire rate bonus"		2
		"mult dmg vs giants"			1.25
		"mult dmg vs tanks"				0.5
		"grenade bounce damage"			0.2
		"no damage falloff"				1
		"grenade bounce speed"			1.25
		"reset arrow hits on bounce"	1
		"projectile lifetime"			2
		"projectile penetration"		1
		"hidden secondary max ammo penalty"	0.5
		"custom projectile model"		"models/weapons/w_models/w_rocketbullet.mdl"
		"custom kill icon"				"deflect_promode"	// why is it called specifically promode?
		"spread offset pattern"		"10 -15 -10"
	}
	// Dev Notes: Oh hey, here's a fucking awesome new one.
	// So when Waters of Wrath was in development, I'm pretty sure Colonel wanted to add a Sharpshooter revolver- but woe be upon us, because the stupid projectile falls to ground thing happens.
	// A year passes by and here we are- I remember that and try getting it to work before asking Lite and now we have something fucking cool for Spy. AND it's an Ultrakill reference.
	// It's an interesting weapon choice because it's like a multi-tool of sorts- it allows Spy to actually be able to do something to tanks, AND it can deflect if you buy the custom upgrade.

	CustomWeapon
	{
		Name				"The Timely Demise"
		OriginalItemName	"Festive Sapper"
		"special item description"	"Attaches a timebomb to sapped bots and buildings"
		"special item description 2"	"Timebomb detonates after 3 seconds, dealing 175 damage"
		"special item description 3"	"Stunning and slowing disabled, upgrading will increase damage by 75 and blast radius by 50% per level"
		"effect cond override"	118	// wanted to pick an attribute that does nothing so I picked this and hoped it wouldn't do anything funky
		"custom sapper sound"	"=85|pl_hoodoo/alarm_clock_ticking_3.wav"
		"sapper damage penalty"	0
		
		"custom item model"	"models/weapons/c_models/c_timely_demise/c_timely_demise.mdl"
		//"custom sapper model"	"models/weapons/c_models/c_timely_demise/c_timely_demise.mdl"
	}
	// Dev Notes: Returning weapon, but this MIGHT be my most favorite weapon of the whole pack because it's something nobody's ever actually really done with rafmod before.
	// People really haven't tried messing around with custom sappers from what I've seen, so that opened the opportunity to try my own spin with a bit of crackhead pointtemplate design.

	CustomWeapon	[$SIGSEGV]	// Used in Timely Demise PointTemplate
	{
		Name	"ooooh pipebomb"
		OriginalItemName	"TF_WEAPON_GRENADELAUNCHER"
		"custom projectile model"		"models/empty.mdl"
		"projectile speed decreased"	0.001
		"projectile range decreased"	0.001
		"blast radius increased"		1.3
		"fuse bonus"					-1
		"damage bonus"					1.75
		"fire input on hit"		"YEAHHHHH_SHAKE_THAT_SHIT*^StartShake^0"
		"mult dmg vs giants"	2
		"dmg bonus vs buildings"	10
		"custom kill icon"	"mailbox"
		"dmg pierces resists absorbs"	1
		"projectile detonate time"	0.02
		"projectile gravity"		0.02
	}

	//CustomWeapon	[$SIGSEGV]
	//{
	//	Name							"Vampire Module"
	//	OriginalItemName				"TTG Watch"
	//	"special item description"		"+75 base HP. Cloak instead grants +80 empty HP, 25% damage resistance, the ability to attack with your watch active, minicrits, and healing based on damage."
	//	"special item description 2"	"Health healed past empty HP will turn into overheal when your watch is deactivated."
	//	//"effect cond override"			24080	// disabled because you can press L to throw the powerup out and I think even with a pt, if you do this inside someone, they get the powerup permanently
	//	"effect cond override"			16	// just minicrits
	//	"effect add attributes"			"damage returns as health|0.5|dmg taken increased|0.75|max health additive penalty|80"
	//	"max health additive bonus"		75
	//	"mult cloak meter consume rate"	2.0
	//	"mult cloak meter regen rate"	2
	//	"mult decloak rate"				0.01
	//}
	// Dev Notes: Weapon originally made for what was going to be my HH2 missions. I randomly found it in an old pile of incomplete popfiles and was compelled to bring this back.
	// Custom watches are also a rare sight. This one's very different since it's a more offensive oriented watch, but it's also defensive at the same time if you use it right.
	// Similar to the Sharpshooter, it acts like a bit of a multi-tool; it encourages you to use the offensive focus to gain defensive benefits to leave a situation.
	// This obviously has immense capabilities when combined with the aforementioned silly gun. It also technically turns any knife into the Kunai... at the cost of cloak.
	// Thinking of giving it a hefty downside to balance out the fact it's like a pocket buff banner on demand. My main idea is no cloak regen- you must regen though ammo packs.
	// nvm this shit is annoying to deal with

	///////////////////////////////

	// the, uh, rebalances.
	
	ItemAttributes	[$SIGSEGV]	// Probably the only actual rebalance I'll be doing?
	{
		ItemName	"The Gunslinger"
		"special item description"			"Grants a free disposable mini-sentry, x2 dispenser heal/ammo rate, +25% sentry damage"
		"special item description"			"[NOTICE] Has access to special mini-sentry modules at the Upgrade Station"
		"mult dispenser rate" 				2
		"engy disposable sentries"			1
		"engy sentry damage bonus"			1.25
	}

	//ItemAttributes	[$SIGSEGV]	// Not a real rebalance- just fixes the fact this crashes if you have homing attributes from the Infrared Transmitter
	//{
	//	ItemName	"The Sandman"
	//	"attribute immunity"	"mod projectile heat seek power|mod projectile heat aim error|projectile trail particle"
	//}
	// nvm the infrared transmitter is now fake and gay and no longer available so this is certified Obsolete


	///////////////////////////////

	PointTemplates
	{
		SawbladeLauncherLogic	// rotating sword demo logic from midnight patrol, slightly modified with permission
        {
            func_rotating
            {
                targetname "rot"
                spawnflags 593
                fanfriction 333333
                maxspeed 400
            }
            OnSpawnOutput
            {
                target "rot"
                action "addoutput"
                param "avelocity 0 400 0"
                delay 0.01
            }
            OnSpawnOutput
            {
                target "!activator"
                action "addoutput"
                param "rendermode 10"	
                delay 0.01
            }
            prop_dynamic
            {
                targetname "blade1"	
                parentname "rot"
                model "models/props_forest/saw_blade.mdl"
                angles "0 0 -90"
            }
			OnSpawnOutput
			{
				target	!activator
				action	RunScriptCode
				param	"self.SetMoveType(4, 2)"
			}
        }

		CompositionFourTemplate
		{
			KeepAlive	1
			tf_point_weapon_mimic
			{
				"targetname"   "c4_mimic"
				"$weaponname"	"ooooh pipebomb"
				"teamnum"		"2"
				"origin"       "0 0 0"
				"angles"       "90 0 0"
			}
            OnSpawnOutput
            {
                Target    c4_mimic
                Action    "RunScriptCode"
                Param    "
local hBuilder = GetPropEntity(activator, `m_hBuilder`)
self.SetOwner(hBuilder)
for(local i = 0; i <= 8; i++)
{
    local hWeapon = GetPropEntityArray(hBuilder, `m_hMyWeapons`, i)
    if(hWeapon && hWeapon.GetSlot() == 1)
    {
        local iSapperLevel = hWeapon.GetAttribute(`robo sapper`, 0)
        printl(iSapperLevel)
        local flDamageBonus = 1.75
        local flBlastRadius = 1.3

        if(iSapperLevel == 1)
        {
            flDamageBonus = 2.5
            flBlastRadius = 1.8
        }
        else if(iSapperLevel == 2)
        {
            flDamageBonus = 3.25
            flBlastRadius = 2.2
        }
        else if(iSapperLevel == 3)
        {
            flDamageBonus = 4
            flBlastRadius = 2.7
        }

        self.AcceptInput(`$AddWeaponAttribute`, format(`damage bonus|%f`, flDamageBonus), null, null)
        self.AcceptInput(`$AddWeaponAttribute`, format(`blast radius increased|%f`, flBlastRadius), null, null)
        break
    }
}"
            }
			OnSpawnOutput
			{
				Target	c4_mimic
				Action	"FireOnce"
				Delay	3
			}
            OnSpawnOutput
            {
                Target    c4_mimic
                Action    "RunScriptCode"
                Param    "self.SetOwner(NetProps.GetPropEntity(activator, `m_hBuilder`))"
                Delay    0
            }
            OnSpawnOutput
            {
                Target    c4_mimic
                Action    "RunScriptCode"
                Param    "DispatchParticleEffect(`hightower_explosion`, self.GetOrigin(), Vector(0, 0, 1))"
                Delay    3
            }
			OnSpawnOutput
			{
				Target	!activator
				Action	RemoveHealth
				Param	999
				Delay	3.1
			}
			OnSpawnOutput
			{
				Target	c4_mimic
				Action	Kill
				Delay	3.1
			}
			OnSpawnOutput
			{
				Target	YEAHHHHH_SHAKE_THAT_SHIT*
				Action	Kill
				Delay	3.1
			}
			env_shake
			{
				"targetname"	"YEAHHHHH_SHAKE_THAT_SHIT"
				"amplitude"		"16"
				"radius"		"500"
				"duration"		"2"
				"frequency"		"40"
				"spawnflags"	"4"
			}
		}

//        payoff_pt
//        {
//			OnSpawnOutput
//			{
//				Target @c@!activator
//				Action runscriptcode
//				Param "if(self.GetClassname()!=`tf_weapon_scattergun`)return;player<-NetProps.GetPropEntity(self,`m_hOwner`);function PayToPlayThink(){self.AddAttribute(`CARD: damage bonus`,player.GetCurrency()/1776.0+1.0,-1);return -1};AddThinkToEnt(self,`PayToPlayThink`)"
//			}
//        }


		MiniPDATemplate
		{
			OnSpawnOutput
			{
				Target	!activator
				Action	$AddItemAttribute
				Param	"CARD: damage bonus|1.75|0"
			}
			OnParentKilledOutput
			{
				Target	!activator
				Action	$RemoveItemAttribute
				Param	"CARD: damage bonus|0"
			}
            OnSpawnOutput
            {
                Target !activator
                Action RunScriptCode
                Param "AthazarWeaponPack.MiniPDA.call(this)"
            }

			OnSpawnOutput	// fix from fellen
			{
				Target !parent
				Action RunScriptCode
				Param "
					for (local tele; tele = Entities.FindByClassname(tele, `obj_teleporter`);) {
						if (NetProps.GetPropBool(tele, `m_bPlacing`)) continue

						local builder = NetProps.GetPropEntity(tele, `m_hBuilder`)
						if (builder != self) continue

						NetProps.SetPropInt(tele, `m_iHighestUpgradeLevel`, 1)
						NetProps.SetPropInt(tele, `m_iUpgradeLevel`, 1)

						local pda
						for (local i = 0; i < 7; ++i) {
							local wep = GetPropEntityArray(builder, `m_hMyWeapons`, i)
							if (wep == null || wep.GetSlot() != 3) continue
							pda = wep
							break
						}

						local maxhp = 150.0 * pda.GetAttribute(`engy building health bonus`, 1.0)
						tele.SetMaxHealth(maxhp)
						if (tele.GetHealth() > maxhp)
							tele.SetHealth(maxhp)

					}
				"
			}

		}
		SharpshooterTemplate
		{
			OnSpawnOutput
			{
				Target !activator
				Action RunScriptCode
				Param "for(local hBolt; hBolt = Entities.FindByClassnameWithin(hBolt, `tf_projectile_arrow`, self.EyePosition(), 64);)if(hBolt.GetOwner() == self){ hBolt.SetAbsVelocity(hBolt.GetForwardVector() * 2600); hBolt.SetMoveType(4, 2) }"
			}
		}

		polarity_point
		{
			OnSpawnOutput
			{
				Target !activator
				Action RunScriptCode
				Param "AthazarWeaponPack.PolarityPoint.call(this)"
			}
		}

		solarcarbonizer_fix
		{
            OnSpawnOutput
            {
                Target !activator
                Action RunScriptCode
                Param "AthazarWeaponPack.SolarCarbonizer.call(this)"
            }
		}

		canned_conserva
		{
            OnSpawnOutput
            {
                Target !activator
                Action RunScriptCode
                Param "AthazarWeaponPack.CannedConserva.call(this)"
            }
		}

        includescript_awp
		{
			OnSpawnOutput
			{
				Target wave_start_relay
				Action runscriptcode
				Param "IncludeScript(`athazarweaponpack`, getroottable())"
			}
		}
		
		
	}

	SpawnTemplate	includescript_awp

	PlayerShootTemplate
	{
		Name	SawbladeLauncherLogic
		AttachToProjectile	1
		ItemName		"Sawblade Launcher"
	}
	BuildingSpawnTemplate
	{
		Name	CompositionFourTemplate
		ItemName		"The Timely Demise"
		BuildingType	"Sapper"
	}

	PlayerItemEquipSpawnTemplate
	{
		Name	MiniPDATemplate
		ItemName	"Mini PDA"
	}
//	PlayerItemEquipSpawnTemplate
//	{
//		Name	payoff_pt
//		ItemName	"Pay to Play"
//	}
	PlayerShootTemplate
	{
		Name	SharpshooterTemplate
		ItemName		"Sharpshooter"
	}
	PlayerItemEquipSpawnTemplate
	{
		Name	polarity_point
		ItemName	"Polarity Point"
	}
	PlayerItemEquipSpawnTemplate
	{
		Name	solarcarbonizer_fix
		ItemName	"The Solar Carbonizer"
	}
	PlayerItemEquipSpawnTemplate
	{
		Name	canned_conserva
		ItemName	"The Canned Conserva"
	}
	ExtraLoadoutItems [$SIGSEGV]
	{
		Scout
		{
			Primary		"The Payoff"	
			Secondary	"The Meta-Cola"
			//Melee		"The Electro-Swinger"
		}
		Soldier
		{
			Primary		"Spitfire"
			Secondary	"The Handheld Howitzer"
		}
		Pyro
		{
			//Primary		"Inferno Rebound"
			Primary		"The Solar Carbonizer"
			Secondary	"The Calefactor"
		}
		Demoman
		{
			Primary		"Sawblade Launcher"
			Primary		"Primed Directive"
			Secondary	"Polarity Point"
		}
		Heavyweapons
		{
			Primary		"Nail Minigun"
			Secondary	"The Canned Conserva"
		}
		Engineer
		{
			Primary		"Screwdriver Railgun"
			Secondary	"The Gamma Gazer"
			//Melee		"Artillery Sentry Wrench"	// This fucking sucks, actually. Blame the fact that explosive bullets inexplicably strangles the server.
			PDA			"Mini PDA"
		}
		Medic
		{
			Primary		"Pill Popper"
			//Secondary	"Infrared Transmitter"
			Secondary	"The Cauterizer"
			Melee		"The Lethal Injector"
		}
		Sniper	
		{
			Primary		"50th Caliber"
			Primary		"The Astral Assassin"
			Secondary	"The Bushman's Brick"
		}
		Spy
		{
			Secondary	"Sharpshooter"
			Secondary	"Tranquilizer Gun"
			Building	"The Timely Demise"
			//PDA2		"Vampire Module"
		}


	}

	/////////////////////////

	ExtendedUpgrades	[$SIGSEGV]
	{
		universal_killstreak
		{
			Name			"Killstreak Kit"
			Attribute		"killstreak tier"
			Cap				1
			Increment		1
			Cost			0
			Description		"Killstreaks enabled on the weapon, for free. If you care about killstreaks, I guess."
			AllowedWeapons
			{
				ItemName	"The Payoff"
				//ItemName	"The Electro-Swinger"
				ItemName	"Spitfire"
				ItemName	"The Handheld Howitzer"
				//ItemName	"Inferno Rebound"
				ItemName	"The Solar Carbonizer"
				ItemName	"The Calefactor"
				ItemName	"Sawblade Launcher"
				ItemName	"Primed Directive"
				ItemName	"Polarity Point"
				ItemName	"Nail Minigun"
				ItemName	"Screwdriver Railgun"
				ItemName	"The Gamma Gazer"
				//ItemName	"Artillery Sentry Wrench"
				ItemName	"Pill Popper"
				//ItemName	"Infrared Transmitter"
				ItemName	"The Cauterizer"
				ItemName	"The Lethal Injector"
				ItemName	"50th Caliber"
				ItemName	"The Astral Assassin"
				ItemName	"The Bushman's Brick"
				ItemName	"Tranquilizer Gun"	// lol?
				ItemName	"Sharpshooter"
				
			}
		}
		electroswinger_mfd
		{
			Name			"MFD Module"
			Attribute		"cannot trade"
			Cap				1
			Increment		1
			Cost			400
			Description		"Mark one target at a time for death on hit. Occurs even on reflected projectile hits!"
			SecondaryAttributes
			{
				"mark for death"	1
			}
			AllowedWeapons
			{
				ItemName	"The Electro-Swinger"
			}
		}
		spitfire_bleed
		{
			Name			"Sharper Shrapnel"
			Attribute		"cannot trade"
			Cap				4
			Increment		1
			Cost			200
			Description		"+25% bleed damage, -0.1s bleed tick rate"
			SecondaryAttributes
			{
				"mult bleeding dmg"	0.25
				"mult bleeding delay"	-0.1
			}
			AllowedWeapons
			{
				ItemName	"Spitfire"
			}
		}

		primed_directive_fuse_bonus
		{
			Name			"Longer Fuse"
			Attribute		"cannot trade"
			Cap				2
			Increment		1
			Cost			200
			Description		"+25% time before grenade explodes, allowing for more bounces"
			SecondaryAttributes
			{
				"fuse bonus"	0.25
			}
			AllowedWeapons
			{
				ItemName	"Primed Directive"
			}
		}

		screwdriver_bleed
		{
			Name			"Sharpened Tip"
			Attribute		"cannot trade"
			Cap				4
			Increment		1
			Cost			300
			Description		"+25% bleed damage, +0.5s bleed duration"
			SecondaryAttributes
			{
				"mult bleeding dmg"	0.25
				"bleeding duration"	0.5
			}
			AllowedWeapons
			{
				ItemName	"Screwdriver Railgun"
			}
		}
		screwdriver_leech	// mimics healing gimmick from Ultrakill
		{
			Name			"Leech Module"
			Attribute		"never craftable"
			Cap				1
			Increment		1
			Cost			300
			Description		"Heals 1 HP for every tick of damage"
			SecondaryAttributes
			{
				"heal on hit for rapidfire"	1
			}
			AllowedWeapons
			{
				ItemName	"Screwdriver Railgun"
			}
		}
		sharpshooter_deflect
		{
			Name			"Destroy Projectiles"
			Attribute		"attack projectiles"
			Cap				2
			Increment		1
			Cost			400
			Description		"Destroys projectiles in a cylinder in front of you"
			AllowedWeapons
			{
				ItemName	"Sharpshooter"
			}
		}

		minipda_disposable_at_a_slightly_more_reasonable_price
		{
			Name			"+1 Disposable Sentry"
			Attribute		"cannot trade"
			Cap				1
			Increment		1
			Cost			400
			Description		"Adds an extra Disposable Sentry. Stacks with Gunslinger's extra disposable for a total of 4."
			AllowedWeapons
			{
				ItemName	"Mini PDA"
			}
			SecondaryAttributes
			{
				"engy disposable sentries"	2
			}
		}

		gunslinger_rocketmodule
		{
			Name			"Gunslinger Module: Rocket"
			Attribute		"cannot trade"
			Cap				1
			Increment		1
			Cost			0
			Description		"Your sentries shoot rockets instead of bullets."
			SecondaryAttributes
			{
				"sentry bullet weapon"	"Rocket Module"
				"engy sentry fire rate increased"	4.5
			}
			AllowedWeapons
			{
				ItemName	"The Gunslinger"
			}
			DisallowedUpgrade
			{
				Upgrade	gunslinger_flamemodule
			}
		}

		pillpopper_milk
		{
			Name			"Mad Milk Grenades"
			Attribute		"cannot trade"
			Cap				1
			Increment		1
			Cost			900
			Description		"Grenades now apply mad milk to enemies."
			SecondaryAttributes
			{
				"add cond on hit"	"27"
				"add cond on hit duration"	0.5
			}
			AllowedWeapons
			{
				ItemName	"Pill Popper"
			}

		}


		polaritypoint_magnet_specialist
		{
			Name			"Magnet Specialist"
			Attribute		"cannot trade"
			Cap				2
			Increment		1
			Cost			250	// because demo is already expensive as is
			Description		"+2.5 seconds magnet duration and -0.5s stickybomb detonation time per level"
			SecondaryAttributes
			{
				"obsolete ammo penalty"	2.5
				"projectile detonate time"	-0.5
			}
			AllowedWeapons
			{
				ItemName	"Polarity Point"
			}

		}
		
		tranquilizer_covert_ops
		{
			Name			"Covert Module"
			Attribute		"cannot trade"
			Cap				1
			Increment		1
			Cost			500
			Description		"Allows you to shoot without losing your disguise"
			SecondaryAttributes
			{
				"keep disguise on attack"	1
			}
			AllowedWeapons
			{
				ItemName	"Tranquilizer Gun"
			}
		}
	}

	/////////////////////////

	DisallowUpgrade	  
	{
		Upgrade		"clip size bonus upgrade"	// defunct - weapon has infinite clip
		ItemName	"The Handheld Howitzer"
	}
	DisallowUpgrade	  
	{
		Upgrade		"faster reload rate"	// defunct - weapon has infinite clip and therefore no reload
		ItemName	"The Handheld Howitzer"
	}
	DisallowUpgrade	  
	{
		Upgrade		"weapon burn dmg increased"	// defunct - weapon's downside is nearly no afterburn
		ItemName	"The Solar Carbonizer"
	}
	DisallowUpgrade	  
	{
		Upgrade		"weapon burn time increased"	// defunct - weapon's downside is nearly no afterburn
		ItemName	"The Solar Carbonizer"
	}
	DisallowUpgrade	  
	{
		Upgrade		"projectile penetration"	// defunct - explained in item desc. proj pen causes arrow mastery to be weird
		ItemName	"The Astral Assassin"
	}
	DisallowUpgrade	  
	{
		Upgrade		"projectile penetration"	// defunct - needles cannot penetrate
		ItemName	"Tranquilizer Gun"
	}
	DisallowUpgrade	  
	{
		Upgrade		"projectile penetration"	// defunct - needs a different attribute to penetrate
		ItemName	"The Gamma Gazer"
	}

	DisallowUpgrade	  
	{
		Upgrade		"explosive sniper shot"	// defunct - has explosive bullets already
		ItemName	"50th Caliber"
	}
	DisallowUpgrade	  
	{
		Upgrade		"projectile penetration heavy"	// defunct - needles cannot penetrate
		ItemName	"Nail Minigun"
	}


}